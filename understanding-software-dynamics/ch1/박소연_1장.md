# Understanding Software Dynamics Ch.01

## 책 내용 정리 
1.1 데이터 센터의 측면: 소프트웨어마다 타겟팅하는 성능의 기준이 다를 수 있다.
- 트랜잭션 소프트웨어: 평균 응답시간을 성능의 주요 기준으로 삼는다.
- 배치 소프트웨어(오프라인 소프트웨어): 하드웨어 사용률을 성능의 주요 기준으로 삼는다.

1.3 데이터 센터 소프트웨어: 서버가 빠르게 응답할 수 있도록 하는 기술
- 소프트웨어 캐시: 캐싱된 데이터를 찾아 재사용
- 로드밸런싱 서버: 사용량이 적은 서버로 요청 전달
- 계층간 호출(RPC): 동기식 / 비동기식 -> 병렬 처리
  - RPC가 병렬로 끝나면 일반적으로 가장 느리게 끝난 시간이 전체 응답 시간을 결정한다.

1.4 long-tail 지연시간: 두 이벤트 시간의 실제 시간 차이 -> 이 책이 해결하고자 하는 문제
- RPC 지연 시간: 유저 모드 프로그램(클라이언트)에서 요청을 보내고 응답을 받기까지 걸리는 시간
  - 지연 시간에 대한 데이터를 분석할 때는 주로 percentile을 사용한다. 

## 좋았던 부분
- 앞으로 배울 내용에 대해 배경지식을 쌓아주는 느낌이라서 좋았다.

## 새로 배운 내용
- 지연 시간을 측정하기 위해서 사용하는 관찰 도구마다 간섭 정도가 다르며, 어떤 산업군에서는 1% 미만의 매우 작은 오버헤드가 발생하는 관측기술을 사용해야 한다. 어떤 관측 기술을 사용하는지 궁금함 

## 내용을 복습하기 위한 유튜브 링크나 논문 혹은 참고 자료들
- [마이크로서비스 종속성 및 성능 특성화: Alibaba Trace Analysis(SoCC '21)](https://github.com/alibaba/clusterdata/tree/master/cluster-trace-microservices-v2021): 성능측정 관점의 내용만 짧게 요약해보자면, 이 논문에서 알리바바 클러스터에 배포된 대규모 마이크로서비스에 대한 분석을 수행한 논문이며, 7일 동안 20,000개 이상의 마이크로서비스의 동작을 분석하고 수집된 100억 건의 트레이스를 기반으로 특성을 프로파일링 했다.
  - 마이크로서비스 런타임 성능 간의 상관관계를 분석
  - Alibaba 클러스터는 베어메탈 머신을 관리하기 위해 Kubernetes를 사용하고 있고, 여러 트레이스를 기반으로 서비스를 배치한다.
    - 시스템 메트릭: 매 분 마이크로서비스 트레이스를 수집하고, 그 평균을 기록
      - 하드웨어 수준 메트릭: 캐시 누락 및 명령어당 주기
      - 운영 체제 메트릭: CPU 및 메모리 사용률 
      - 애플리케이션 수준 메트릭: JVM 힙 사용률 및 가비지 수집
    - 콜 그래프 트레이스
    - 단일 마이크로서비스 트레이스
  - 여기서는 마이크로서비스의 콜 그래프 크기도 분석하고 있음(Heavy tail)
    - 대부분의 마이크로서비스는 종속성이 적지만, 종속성이 많은 소수의 마이크로서비스의 수를 무시하기 어렵다.