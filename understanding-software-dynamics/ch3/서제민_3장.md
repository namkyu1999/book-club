# Understanding Software Dynamics Ch.03

3장 메모리 측정

## 책 내용 정리 (희망하는 사람만)

### 3-3 캐시 구조
- 최근 데이터 센터의 CPU는 여러 계층의 캐시 메모리와 큰 메인 메모리로 구성된 계층 구조를 가짐.
- 물리 CPU 코어는 1계층 명령어 캐시와 데이터 캐시를 가짐. 이 캐시는 SRAM 셀로 구성
  - CPU 사이클이 옛날에 비해 250배 정도 속도 향상 되었을때, 메인 메모리는 같은 기간 약 20배 향상됨. 둘의 속도 차이가 커졌다.
- L2 캐시까지는 하나의 코어가 소유하고 L3,L4는 모든 코어가 공유한다.
- 캐시 라인마다 필요한 데이터의 최소량은 2워드. 캐시 라인의 최대 크기는 가상 메모리 시스템의 한 페이지, 대부분의 최신칩은 4KB를 사용
- 완전 연관 사상 캐시 : 메인 메모리 주소가 있는 데이터는 모두 캐시 라인에 저장.
- 직접 사상 캐시 : 메인 메모리 주소 데이터를 정확히 하나의 캐시 라인에 저장한다. 보통 낮은 주소 비트로 캐시 라인 선택해 분산.

### 3-4 변환 색인 버퍼 구조
- 현대 프로세서는 가상 메모리 맵핑과 자주 사용되는 가상 주소를 물리 주소로 변환하는 정보를 저장하는 TLB를 가짐.
- TLB와 캐시는 상호작용함. 캐시에 물리 주소가 존재해서 세트 선택과 태그 값을 가상 주소에서 물리 주소로 변환한다. 
- 현업에서는 작은 페이지에 맵핑되지 않은 비트가 많아지기에 더 큰 L1 캐시를 사용할 수 있도록 큰 페이지 사용해야 한다. 
  - 페이지 크기를 키워서 페이지 수를 줄이는 방법을 선택해야 한다.

### 3-13 변환 버퍼 시간
- 현대 프로세서는 메모리에 접근하며 동시에 가상 메모리 페이지에도 접근
- 수십 MB의 데이터를 읽는다면 CPU 코어의 하드웨어 TLB도 제거
  - 해당하는 TLB 엔트리를 로드하려면 최소 두 배의 접근 시간이 소요됨
- 4KB 페이지에 맞는 256개의 항목 중 스트라이드 16과 같이 16 바이트 크기가 있다면 256개 모두 접근할때 한번의 TLB만 발생.

## 좋았던 부분

## 새로 배운 내용

## 책의 내용과 관련한 본인의 경험 (실무 경험, 프로젝트 경험)

## 데모 시연 (준비한 사람만) or 코드 조각

## 내용을 복습하기 위한 유튜브 링크나 논문 혹은 참고 자료들

## 이해 안되거나 모르는 부분

## 그외 자유롭게 작성